pipeline {
  agent {
    node {
      label 'SlaveNode'
    }

  }
  stages {
    stage('test') {
      steps {
        sh 'echo "hello this is first code pipeline"'
      }
    }

    stage('build') {
      steps {
        sh 'echo "This is Build Stage"'
      }
    }

               stage('Approval') {
            steps {
                script {
                    def emailApproval = input(
                        id: 'emailInput',
                        message: 'Do you want to continue?',
                        parameters: [choice(choices: 'Approve', description: 'Click "Approve" to continue', name: 'Approval')]
                    )

                    if (emailApproval == 'Approve') {
                        emailext (
                            subject: 'Pipeline Approved',
                            body: 'Your pipeline has been approved and will proceed with the deployment stage.',
                            to: 'prabhat.bhadoriya@inspiritvision.com'
                        )
                    } else {
                        error 'Build aborted by user'
                    }
                }
            }
        }



    stage('Deploy') {
      steps {
        sh 'echo "This is Deployment Stage"'
      }
    }

  }
}
